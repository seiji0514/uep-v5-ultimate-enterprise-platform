# Cursor AIエージェント向け指示書

**作成日**: 2026年1月29日  
**目的**: Cursor AIエージェントがこのプロジェクトを理解し、効果的に支援するための指示

---

## 📋 プロジェクトの理解

このプロジェクトは「**次世代エンタープライズ統合プラットフォーム v5.0 - Ultimate Enterprise Edition (UEP v5.0)**」です。

### プロジェクトの目的

企業が最重視するIT戦略課題と需要が高いシステムを全て含む統合プラットフォームを構築する。

### 現在の実装状況

- ✅ **Phase 1.1: 統合API Gateway構築** - 完了
- 🔄 **Phase 1.2: 統合認証・認可システム構築** - 次に実装予定

---

## 🎯 実装方針

### アーキテクチャ原則

1. **マイクロサービスアーキテクチャ**: 各システムを独立したサービスとして実装
2. **イベント駆動設計**: Kafkaによるサービス間通信により、疎結合な統合
3. **API Gateway**: すべてのシステムへの統一エントリーポイント
4. **統合監視**: すべてのシステムの統合監視

### コーディング規約

- **Python**: PEP 8準拠、型ヒントを使用
- **ファイル名**: スネークケース（snake_case）
- **関数名**: スネークケース（snake_case）
- **クラス名**: パスカルケース（PascalCase）
- **コメント**: 日本語で記述

---

## 📁 ファイル構造の理解

### 重要なディレクトリ

- `infrastructure/` - インフラ設定（API Gateway、認証、データレイク、イベントストリーミング、監視、セキュリティ）
- `backend/` - バックエンドAPI（FastAPI）
- `frontend/` - フロントエンド（将来実装）
- `docs/` - ドキュメント

### 重要なファイル

- `README.md` - プロジェクト概要
- `PROJECT_CONTEXT.md` - プロジェクトコンテキスト（詳細）
- `.cursorrules` - Cursor AIエージェント設定
- `docker-compose.yml` - Docker Compose設定
- `backend/main.py` - バックエンドAPIのメインコード

---

## 🔄 実装時の注意事項

### Phase 1.2の実装（次）

統合認証・認可システムを実装する際は、以下を考慮：

1. **OAuth2/OIDC認証**: 標準的なOAuth2/OIDCフローを実装
2. **JWT認証**: JWTトークンの生成・検証
3. **RBAC/ABAC認可**: ロールベースと属性ベースのアクセス制御
4. **SSO実装**: シングルサインオンの実装

### 既存コードとの統合

- `backend/main.py`の既存コードを拡張
- `infrastructure/auth/`ディレクトリに認証・認可モジュールを追加
- `docker-compose.yml`に認証サービスを追加

---

## 🚀 実行環境の理解

### 開発環境

- **WSL2**: Ubuntu/Debianベース
- **Docker**: WSL内で直接インストール（Docker Desktop不要）
- **Python**: 3.11+

### 実行方法

- **ローカル実行**: `./start-local.sh`（Docker不要）
- **Docker実行**: `./demo-start.sh`（デモンストレーション用）

---

## 📝 ドキュメントの参照

実装時に不明な点がある場合は、以下を参照：

- `PROJECT_CONTEXT.md` - プロジェクトの詳細なコンテキスト
- `docs/DESKTOP_SETUP_GUIDE.md` - セットアップ手順
- `docs/PHASE1_IMPLEMENTATION.md` - Phase 1の実装ガイド

---

## ✅ チェックリスト

実装時は以下を確認：

- [ ] 既存のコードスタイルに準拠している
- [ ] 型ヒントを使用している
- [ ] コメントが日本語で記述されている
- [ ] エラーハンドリングが適切に実装されている
- [ ] ログが適切に記録されている
- [ ] テストが実装されている（可能な場合）

---

以上
